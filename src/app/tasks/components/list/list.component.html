<div class="list">
  <div class="list-header">
    <input #title
      class="list-header-name mod-list-name"
      [(ngModel)]="list.title"
      (keyup.enter)="updateTitle(title.value);$event.target.blur();"
      spellcheck="false"
      maxlength="512"
      style="overflow: hidden; overflow-wrap: break-word; height: 30px;"
      >
    <p class="list-header-num-cards">{{ (items)?.length }} cards</p>
    <div class="list-header-extras">
      <button mat-button [matMenuTriggerFor]="menu">···</button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="toggleAddItemDialog()">Add card...</button>
        <button mat-menu-item (click)="remove()">Remove list</button>
      </mat-menu>
      <!-- <div dropdown class="btn-group">
        <a
          dropdownToggle
          class="list-header-extras-menu"
          
          (click)="false"
        >···</a>
        <ul
          *dropdownMenu
          class="dropdown-menu"
        >
          <li class="disabled">
            <a
              class="dropdown-item disabled"
              
            >List actions</a></li>
          <li class="divider dropdown-divider"></li>
          <li role="menuitem">
            <a
              class="dropdown-item"
              
              (click)="toggleAddItemDialog()"
            >Add card...</a>
          </li>
          <li class="divider dropdown-divider"></li>
          <li role="menuitem">
            <a
              class="dropdown-item"
              
              (click)="remove()"
            >Remove list...</a>
          </li>
        </ul>
      </div> -->
    </div>
  </div>

  <div cdkDropList class="list-cards"
    (cdkDropListDropped)="onDrop($event)"
    [cdkDropListData]="items"
    >
    <app-item class="item-box" *ngFor="let item of items; trackBy: trackByFn; let i = index;"
      cdkDrag
      [cdkDragData]="item"
      [item]="item"
      (click)="openEditItem(item)"
    ></app-item>
  </div>
  <div class="footer">
    <div class="card-composer list-cards" *ngIf="addItemDialog">
      <div class="list-card">
        <div class="list-card-details">
          <div class="list-card-labels"></div>
          <textarea
            #newItemTitle
            (keyup.enter)="addItem(newItemTitle.value); toggleAddItemDialog()"
            class="list-card-composer-textarea"
            placeholder="Enter item title"
            style="overflow: hidden; overflow-wrap: break-word; resize: none; height: 54px;"
            autofocus
          ></textarea>
        </div>
      </div>
      <div class="cc-controls">
        <div class="cc-controls-section">
          <input
            class="btn-primary mod-list-add-button"
            type="submit"
            value="Add item"
            (click)="addItem(newItemTitle.value); toggleAddItemDialog()">
          <button
            class="close"
            (click)="toggleAddItemDialog()"
          >
            <span>&times;</span>
          </button>
        </div>
      </div>
    </div>
    <a class="open-card-composer" *ngIf="!addItemDialog">
      <span (click)="toggleAddItemDialog()"
           *ngIf="!(list.items)?.length"
          >Add item</span>
      <span (click)="toggleAddItemDialog()"
           *ngIf="(list.items)?.length">Add new item</span>
    </a>
  </div>
</div>
